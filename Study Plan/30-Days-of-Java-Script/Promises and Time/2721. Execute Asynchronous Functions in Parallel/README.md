# 2721. Execute Asynchronous Functions in Parallel

**–£—Ä–æ–≤–µ–Ω—å:** Medium  
**–¢–µ–º—ã:** #–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å #Promises #–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ  
**–°—Å—ã–ª–∫–∞:** [LeetCode Problem](https://leetcode.com/problems/execute-asynchronous-functions-in-parallel/)

## üìú –£—Å–ª–æ–≤–∏–µ
–î–∞–Ω –º–∞—Å—Å–∏–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π `functions`, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–∏—Å. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —ç—Ç–∏ –ø—Ä–æ–º–∏—Å—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –ø—Ä–æ–º–∏—Å `promise`, –∫–æ—Ç–æ—Ä—ã–π:

- `–†–µ–∑–æ–ª–≤–∏—Ç—Å—è`, –∫–æ–≥–¥–∞ –≤—Å–µ –ø—Ä–æ–º–∏—Å—ã –∏–∑ `functions` –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã. –ó–Ω–∞—á–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –º–∞—Å—Å–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
- `–û—Ç–º–µ–Ω—è–µ—Ç—Å—è`, –µ—Å–ª–∏ –ª—é–±–æ–π –∏–∑ –ø—Ä–æ–º–∏—Å–æ–≤ –æ—Ç–∫–ª–æ–Ω—ë–Ω. –ü—Ä–∏ —ç—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–∏—Å–∞.

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–µ—à–∏—Ç–µ –∑–∞–¥–∞—á—É –±–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `Promise.all()`.

#### **–ü—Ä–∏–º–µ—Ä 1:**  
> **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** functions = [
>  () => new Promise(resolve => setTimeout(() => resolve(5), 200))
> ]  
> **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** {"t": 200, "resolved": [5]}  
> **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ**:  
> promiseAll(functions).then(console.log); // [5]  
> –û–¥–∏–Ω–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—ã–ª–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–∏ 200ms —Å –≤–µ–ª–∏—á–∏–Ω–æ–π 5.  

#### **–ü—Ä–∏–º–µ—Ä 2:**  
> **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** functions = [
>  () => new Promise(resolve => setTimeout(() => resolve(1), 200)), 
>  () => new Promise((resolve, reject) => setTimeout(() => reject("Error"), 100))
> ]  
> **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** {"t": 100, "rejected": "Error"}  
> **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ**:  
> –° –º–æ–º–µ–Ω—Ç–∞ –∫–∞–∫ –æ–¥–∏–Ω –∏–∑ –ø—Ä–æ–º–∏—Å–æ–≤ –±—ã–ª –æ—Ç–∫–ª–æ–Ω–µ–Ω, –¥—Ä—É–≥–æ–π –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–π –ø—Ä–æ–º–∏—Å —Ç–∞–∫–∂–µ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –æ—à–∏–±–∫–æ–π –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è.  

#### **–ü—Ä–∏–º–µ—Ä 3:**  
> **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** functions = [
>  () => new Promise(resolve => setTimeout(() => resolve(4), 50)), 
>  () => new Promise(resolve => setTimeout(() => resolve(10), 150)), 
>  () => new Promise(resolve => setTimeout(() => resolve(16), 100))
> ]  
> **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** {"t": 150, "resolved": [4, 10, 16]}  
> **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ**:  
> –í—Å–µ –ø—Ä–æ–º–∏—Å—ã –±—ã–ª–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º.  

## üéØ –†–µ—à–µ–Ω–∏–µ
```javascript
var promiseAll = function(functions) {
  return new Promise((resolve, reject) => {
    const results = [];
    let counted = 0;

    functions.forEach((fn, index) => {
      try {
        fn()
          .then(result => {
            results[index] = result; // c–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–º–µ–Ω–Ω–æ –ø–æ –∏–Ω–¥–µ–∫—Å—É, —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫
            counted++;
            if (counted === functions.length) {
              resolve(results);
            }
          })
          .catch(reject);
      }
      catch (error) {
        reject(error);
      }
    });
    if (functions.length === 0) {
      resolve([]);
    }
  });
};
```