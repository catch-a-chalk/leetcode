# 2637. Promise Time Limit

**Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ:** Medium  
**Ð¢ÐµÐ¼Ñ‹:** #Promise #ÐÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾ÑÑ‚ÑŒ #Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ñ‹  
**Ð¡ÑÑ‹Ð»ÐºÐ°:** [LeetCode Problem](https://leetcode.com/problems/promise-time-limit/)

## ðŸ“œ Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ
Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ñ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸ÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ:
1. ÐŸÑ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ `fn` Ð¸ Ð²Ñ€ÐµÐ¼Ñ `t` (Ð¼Ñ)
2. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð½Ð¾Ð²ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ:
   - Resolve Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð¼ `fn`, ÐµÑÐ»Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð½ÑÐ»Ð¾ â‰¤ `t` Ð¼Ñ
   - Reject Ñ `"Time Limit Exceeded"`, ÐµÑÐ»Ð¸ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐµÐ½ Ð»Ð¸Ð¼Ð¸Ñ‚ `t`

#### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 1:**  
> **Ð’Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:**  
> ```
> fn = async (n) => {  
>  await new Promise(res => setTimeout(res, 100));  
>  return n * n;  
>  }  
> inputs = [5]  
> t = 50  
> ```
> **Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:** {"rejected":"Time Limit Exceeded","time":50}  
> **ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ**:  
> ```
> const limited = timeLimit(fn, t)  
> const start = performance.now()  
> let result;  
> try {  
>   const res = await limited(...inputs)  
>   result = {"resolved": res, "time": Math.floor(performance.now() - start)};  
> } catch (err) {  
>   result = {"rejected": err, "time": Math.floor(performance.now() - start)};  
> }  
> console.log(result) // Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
> ```
> Ð’Ñ…Ð¾Ð´ÑÑ‰Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ð° Ñ€ÐµÐ·Ð¾Ð»Ð²Ð¸Ñ‚ÑŒÑÑ Ñ‡ÐµÑ€ÐµÐ· 100Ð¼Ñ. ÐžÐ´Ð½Ð°ÐºÐ¾, Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ 50Ð¼Ñ, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½Ð¾ Ð¿Ð¾ Ð¿Ñ€Ð¾ÑˆÐµÑÑ‚Ð²Ð¸Ð¸ 50Ð¼Ñ.

#### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 2:**  
> **Ð’Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:**  
> ```
> fn = async (n) => {  
>  await new Promise(res => setTimeout(res, 100));  
>  return n * n;  
> }  
> inputs = [5]  
> t = 150  
> ```
> **Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:** {"resolved":25,"time":100}  
> **ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ**:  
> Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð° 5 * 5 = 25 Ð¿Ñ€Ð¸ t = 100Ð¼Ñ. ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚Ð¾.

#### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 3:**  
> **Ð’Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:**  
> ```
> fn = async (a, b) => {  
>  await new Promise(res => setTimeout(res, 120));  
>  return a + b;  
> }  
> inputs = [5,10]  
> t = 150  
> ```
> **Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:** {"resolved":15,"time":120}  
> **ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ**:  
> Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð° 5 + 10 = 15 Ð¿Ñ€Ð¸ t = 120Ð¼Ñ. ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚Ð¾.

#### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 4:**  
> **Ð’Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:**  
> ```
> fn = async () => {  
>  throw "Error";  
> }  
> inputs = []  
> t = 1000  
> ```
> **Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:** {"rejected":"Error","time":0}  
> **ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ**:  
> Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð½ÐµÐ·Ð°Ð¼ÐµÐ´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÑƒ.

## ðŸŽ¯ Ð ÐµÑˆÐµÐ½Ð¸Ðµ
### ÐžÐ¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ (Promise.race)
```javascript
var timeLimit = function(fn, t) {
  return async function(...args) {
    const timeoutPromise = new Promise((_, reject) => {
      setTimeout(() => reject("Time Limit Exceeded"), t);
    });
    try {
      const result = await Promise.race([
        fn(...args),
        timeoutPromise
      ]);
      return result;
    } catch (err) {
        throw err;
    }
  };
};
```