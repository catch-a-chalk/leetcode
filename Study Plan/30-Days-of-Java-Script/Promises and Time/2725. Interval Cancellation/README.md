# 2725. Interval Cancellation

**–£—Ä–æ–≤–µ–Ω—å:** Medium  
**–¢–µ–º—ã:** #–¢–∞–π–º–µ—Ä—ã #–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å #–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã  
**–°—Å—ã–ª–∫–∞:** [LeetCode Problem](https://leetcode.com/problems/interval-cancellation/)

## üìú –£—Å–ª–æ–≤–∏–µ
–î–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏—è `fn`, –º–∞—Å—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ `args` –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª `t`. –í–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `cancelFn` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞.  
–ü–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏ `cancelTimeMs` –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è `cancelFn`.  
> `setTimeout(cancelFn, cancelTimeMs)`  

–§—É–Ω–∫—Ü–∏—è `fn` —Å `args` –¥–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–Ω–∞ —Å–Ω–æ–≤–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `t` –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ `cancelFn` –Ω–µ –≤—ã–∑–æ–≤–µ—Ç—Å—è –≤ `cancelTimeMs` –º—Å.

#### **–ü—Ä–∏–º–µ—Ä 1:**  
> **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** fn = (x) => x * 2, args = [4], t = 35  
> **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
>```
>[  
>  {"time": 0, "returned": 8},  
>  {"time": 35, "returned": 8},  
>  {"time": 70, "returned": 8},  
>  {"time": 105, "returned": 8},  
>  {"time": 140, "returned": 8},  
>  {"time": 175, "returned": 8}  
>]  
>```  
> **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ**:  
>```  
> const cancelTimeMs = 190;  
> const cancelFn = cancellable((x) => x * 2, [4], 35);  
> setTimeout(cancelFn, cancelTimeMs);  
> ```  
> –ö–∞–∂–¥—ã–µ 35ms –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è fn(4). –î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ t –Ω–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ 190ms, —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è.  
> 1-–π –≤—ã–∑–æ–≤ –≤ 0ms. fn(4) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 8.  
> 2-–π –≤—ã–∑–æ–≤ –≤ 35ms. fn(4) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 8.  
> 3-–π –≤—ã–∑–æ–≤ –≤ 70ms. fn(4) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 8.  
> 4-–π –≤—ã–∑–æ–≤ –≤ 105ms. fn(4) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 8.  
> 5-–π –≤—ã–∑–æ–≤ –≤ 140ms. fn(4) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 8.  
> 6-–π –≤—ã–∑–æ–≤ –≤ 175ms. fn(4) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 8.  
> –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ 190ms  

#### **–ü—Ä–∏–º–µ—Ä 2:**  
> **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** fn = (x1, x2) => (x1 * x2), args = [2, 5], t = 30  
> **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
>```
>[  
>  {"time": 0, "returned": 10},  
>  {"time": 30, "returned": 10},  
>  {"time": 60, "returned": 10},  
>  {"time": 90, "returned": 10},  
>  {"time": 120, "returned": 10},  
>  {"time": 150, "returned": 10}  
>]  
>```  
> **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ**:  
>```  
> const cancelTimeMs = 165;  
> const cancelFn = cancellable((x1, x2) => (x1 * x2), [2, 5], 30)  
> setTimeout(cancelFn, cancelTimeMs)  
> ```  
> –ö–∞–∂–¥—ã–µ 30ms –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è fn(2,5 ). –î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ t –Ω–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ 195ms, —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è.  
> 1-–π –≤—ã–∑–æ–≤ fn –≤ 0ms  
> 2-–π –≤—ã–∑–æ–≤ fn –≤ 30ms  
> 3-–π –≤—ã–∑–æ–≤ fn –≤ 60ms  
> 4-–π f–≤—ã–∑–æ–≤ n –≤ 90ms  
> 5-–π –≤—ã–∑–æ–≤ fn –≤ 120ms  
> 6-–π –≤—ã–∑–æ–≤ fn –≤ 150ms  
> –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ 165ms  

## üéØ –†–µ—à–µ–Ω–∏–µ
### –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Å `setInterval`)
```javascript
var cancellable = function(fn, args, t) {
  fn(...args); // –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
  const timer = setInterval(() => fn(...args), t);
  return () => clearInterval(timer); // –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã
};
```